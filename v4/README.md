# lorddashme.github.io v4

The version 4 of the [lorddashme.github.io](https://lorddashme.github.io/).

## Documentation

### Requirements

- Node.js version 14.15 (or newer)

### Tech Stacks | Packages

- [gatsby](https://www.npmjs.com/package/gatsby): Gatsby is a free and open source framework based on React that helps developers build blazing fast websites and apps.

- [gatsby-plugin-image](https://www.npmjs.com/package/gatsby-plugin-image): Adding responsive images to your site while maintaining high performance scores can be difficult to do manually. The Gatsby Image plugin handles the hard parts of producing images in multiple sizes and formats for you!

- [gatsby-plugin-manifest](https://www.npmjs.com/package/gatsby-plugin-manifest): The web app manifest (part of the PWA specification) enabled by this plugin allows users to add your site to their home screen on most mobile browsers

- [gatsby-plugin-offline](https://www.npmjs.com/package/gatsby-plugin-offline): Adds drop-in support for making a Gatsby site work offline and more resistant to bad network connections.

- [gatsby-plugin-sharp](https://www.npmjs.com/package/gatsby-plugin-sharp): Exposes several image processing functions built on the [Sharp image processing library](https://github.com/lovell/sharp). This is a low-level helper plugin generally used by other Gatsby plugins. You generally shouldn't be using this directly but might find it helpful if doing very custom image processing.

- [gatsby-source-filesystem](https://www.npmjs.com/package/gatsby-source-filesystem): A Gatsby source plugin for sourcing data into your Gatsby application from your local filesystem.

- [gatsby-transformer-sharp](https://www.npmjs.com/package/gatsby-transformer-sharp): Creates ImageSharp nodes from image types that are supported by the [Sharp image processing library](https://github.com/lovell/sharp) and provides fields in their GraphQL types for processing your images in a variety of ways including resizing, cropping, and creating responsive images.

- [prop-types](https://www.npmjs.com/package/prop-types): Runtime type checking for React props and similar objects.

- [react](https://www.npmjs.com/package/react): React is a JavaScript library for creating user interfaces.

- [react-dom](https://www.npmjs.com/package/react-dom): This package serves as the entry point to the DOM and server renderers for React. It is intended to be paired with the generic React package, which is shipped as react to npm.

### Usage

#### Development

To start the development run ```npm run start:dev``` this will run in host 0.0.0.0 that will be exposed outside of the container.

Note: The Development mode right now is not stable as you may see, because in the Development mode all the assets are loaded across all pages. So better to test it with Pre Production Build files.

##### Testing Pre Production Build Files

- To clean the gatsby build files: ```npm run build:clean```.

- To build the current source code: ```npm run build```.

- To serve the actual build files with temporary server: ```npm run build:serve```.

#### Production

- Execute the restore command in the root directory (without using the container interactive), run ```./pre-deployment.sh``` to clean all build files.

- Run command ```npm run build``` to build the production files.

- Run the ```./deploy.sh``` to move all the folders and files generated by Gatsby build in the root directory.

### Starter Prepartion with Docker Compose

- The steps below describe how we set up the Gatsby starter default during the early stages of development for v4.

  - Create ```docker-compose.yml``` and define the desired envinronment.

  - Up the Docker compose yml config ```docker-compose up -d```.

  - Once the Docker container is up and running, enter its interactive CLI.

  - Run ```npm install -g --unsafe-perm gatsby-cli``` to install the Gatsby cli globally in the docker container. The ```--unsafe-perm``` is used to by pass and avoid permission check for Node.js v14 and up when install any package.

  - Install Git by executing the command ```apk add git```. Since we are using aphine version the Git is not yet installed.

  - Execute ```gatsby new temp/ https://github.com/gatsbyjs/gatsby-starter-default``` to download the Gatsby starter default.

  - Once done downloading the files, move all the folders and files in the temp directory to the outer or root directory. Run ```mv * ../``` and ``` mv .* ../``` (This will move all files with file name prefix ".". Be careful with this make sure you are using container before executing this command)

  - Rename ```README.md``` to ```STARTER_README.md```, since we are going to create a from scratch README that will add all the information needed for the development.

  - Modify the ```package.json``` that will fit the project details.

  - Remove unused packages, run ```npm uninstall gatsby-plugin-gatsby-cloud```

  - That's all! we are now successfully prepared the Gatsby starter default.

- Other reference for this preparation.

  - [Gatsby Installation Guide](https://www.gatsbyjs.com/docs/tutorial/part-0/#installation-guide)

  - [Gatsby Starter Default Repository in Github](https://github.com/gatsbyjs/gatsby-starter-default)

### Common Issues

- When running ```npm install``` make sure that the user must own the directory ```npm install``` is run in.
